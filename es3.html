<html>
    <head>
        <title>Excercise 3 training</title>
        
        <style>
            table, td, th, tr {
            border: 1px solid black;
            }
            </style>
    </head>
    <body>
        <h1>Es3</h1>
        <p>Creazione di una classe in js senza usare il prototipo class: classe base che espone le funzioni di somma, sottrazione, moltiplicazione e divisione salvando i risultati all'interno della classe</p>
        <p style="background-color: rgb(247, 252, 0)">Inserisci 2 numeri e schiaccia un pulsante per eseguire un'operazione</p>
        <input type="number" id="primo"></input>
        <input type="number" id="secondo"></input>
        <br><br>
        <!--<div id="div1"></div>-->
        <button id="btn1">+</button>
        <button id="btn2">-</button>
        <button id="btn3">/</button>
        <button id="btn4">*</button>
        <br><br>
        <span id="span"></span>

        <table id="table">
            <tr><th>Primo operatore</th><th>Segno</th><th>Secondo operatore</th><th>Risultato</th></tr>
        </table>

        <script src="js3.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            //controllo che ci sia un valore in last_operation
            //if(last_operation !== null && typeof last_operation !== undefined)... se non Ã¨ null e ha un valore, creo lasto_operation e faccio l'append del local storage (se  non esiste la creo) 
            if(typeof last_operation === "undefined" || last_operation === "null"){
                //var last_operation = localStorage.getItem("operation");
                //$("#table").append(last_operation);
                $("#table").append(localStorage.getItem("operation")); 
            }
        </script>
        <script>
            /*
            var somma = function(){
                var v1 = $("#primo").val();
                var v2 = $("#secondo").val();
                var ris = +v1 + +v2;
                $("#div1").html(ris);
            }
            var btnS = $('<button id="btn1S"></button>');
            btnS.on("click", somma);
            btnS.html("SOMMA");
            $("body").append(btnS);
            
            var molt = function(){
                var v1 = $("#primo").val();
                var v2 = $("#secondo").val();
                var ris = v1*v2;
                $("#div1").html(ris);
            }
            var btnM = $('<button id="btn1M"></button>');
            btnM.on("click", molt);
            btnM.html("MOLTIPLICAZIONE");
            $("body").append(btnM);

            var sott = function(){
                var v1 = $("#primo").val();
                var v2 = $("#secondo").val();
                var ris = v1-v2;
                $("#div1").html(ris);
                
            }
            var btnSot = $('<button id="btn1Sot"></button>');
            btnSot.on("click", sott);
            btnSot.html("SOTTRAZIONE");
            $("body").append(btnSot);

            var divi = function(){
                var v1 = $("#primo").val();
                var v2 = $("#secondo").val();
                var ris = v1/v2;
                $("#div1").html(ris);
            }
            var btnD = $('<button id="btn1D"></button>');
            btnD.on("click", divi);
            btnD.html("DIVISIONE");
            $("body").append(btnD);
            */
            //OTTIMIZZAZIONE

            $("#btn1").click(function(){
                calcola("+");
            });
            $("#btn2").click(function(){
                calcola("-");
            });
            $("#btn3").click(function(){
                calcola("/");
            });
            $("#btn4").click(function(){
                calcola("*");
            });

            function calcola(segno){
                var v1 = $("#primo").val(); //parseInt($("#num1").val());
                var v2 = $("#secondo").val(); //parseInt($("#num2").val());
                var risultato;
                switch(segno){
                    case "+":
                        risultato = +v1 + +v2;
                    break;
                    case "-":
                        risultato = v1-v2;
                    break;
                    case "/":
                        risultato = v1/v2;
                    break;
                    case "*":
                        risultato = v1*v2;
                    break;
                }
                $("#span").html(risultato);
                //$("#table").append("<tr><td>"+v1+"</td><td>"+segno+"</td><td>"+v2+"</td><td>"+risultato+"</td></tr>");
                var string = "<tr><td>"+v1+"</td><td>"+segno+"</td><td>"+v2+"</td><td>"+risultato+"</td></tr>";
                var line = $(string);
                $("#table").append(line);

                //oggetti
                var operation_array = localStorage.getItem("array"); //oggetto con cui creo array e prendo i valori
                if(operation_array === null){
                    operation_array = [];
                }
                /*operation_array = []; //array
                aggiungere elemnto a array
                operation_array[0] = "io"; //indico posizione
                operation_array.push("pluto"); //appinge in ultima posizione
                metodo .pop restituisce array*/
                operation_array.push(string); //aggiungo righe tabella



                /*salvo nel local storage string, nella chiave "operation"
                localStorage.setItem("operation", string); 
                var last_operation = localStorage.getItem("operation");
                $("#table").append(line);*/

                localStorage.setItem("array", operation_array); //risalvo array in localstorage in modo aggiornato
                var operation_array = localStorage.getItem("array");
                //var last_operation = localStorage.getItem("operation");
               


                /*

                #selezionaid
                .selezionaclasse
                "senzanulla"selezionaarray

                */
            }
        </script>
    </body>
</html>
